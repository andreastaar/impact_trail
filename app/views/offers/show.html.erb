<div class="container mt-5 mb-5">
  <div class="row">
    <!-- Imágenes de la oferta -->
    <% if @offer.photos.present? %>
      <div class="col-md-6">
        <div class="product-image-wrapper">
          <% @offer.photos.each do |photo| %>
            <%= cl_image_tag(photo.key, class: 'img-fluid product-image', alt: @offer.title) %>
          <% end %>
        </div>
      </div>
    <% end %>

    <!-- Detalles de la oferta -->
    <div class="col-md-6">
      <h1 class="display-4 text-dark"><%= @offer.title %></h1>
      <p class="text-muted h4 mt-3"><%= @offer.address %></p>
      <p class="text-muted h5 mt-3">Disponibilidad: <%= @offer.availability %> puestos</p>
      <p class="text-muted h5 mt-3">Postulaciones: <%= @offer.applications.count %></p>

      <p class="mt-4"><strong>Descripción:</strong></p>
      <p class="text-secondary"><%= @offer.description %></p>

      <p class="mt-4"><strong>Requisitos:</strong></p>
      <p class="text-secondary"><%= @offer.requirements %></p>

      <p class="mt-4"><strong>Fechas:</strong></p>
      <p class="text-secondary">De <%= @offer.start_date %> a <%= @offer.end_date %></p>

      <!-- Botones y formularios para la organización -->
      <% if current_user.role == "organización" %>
        <div class="mt-5" data-controller="toggle">
          <button data-action="click->toggle#fire" class="btn btn-warning text-light">Editar Oferta</button>
          <%= link_to 'Volver a la lista', offers_path, class: 'btn btn-secondary mt-3' %>
          <%= link_to 'Ver Aplicaciones', offer_applications_path(@offer), class: 'btn btn-secondary mt-3' %>

          <div data-toggle-target="form" class="d-none mt-3">
            <h1>Editar la oferta de voluntariado</h1>
            <%= simple_form_for @offer, url: offer_path(@offer), method: :patch do |f| %>
              <div class="form-group">
                <%= f.input :title, class: 'form-control' %>
              </div>
              <div class="form-group mt-3">
                <%= f.input :description, class: 'form-control' %>
              </div>
              <div class="form-group mt-3">
                <%= f.input :requirements, class: 'form-control' %>
              </div>
              <div class="form-group mt-3">
                <%= f.input :address, class: 'form-control' %>
              </div>
              <div class="form-group mt-3">
                <%= f.input :start_date, as: :string, input_html: {data: {controller: "datepicker"}} %>
              </div>
              <div class="form-group mt-3">
                <%= f.input :end_date, as: :string, input_html: {data: {controller: "datepicker"}} %>
              </div>
              <div class="form-group mt-3">
                <%= f.input :availability, class: 'form-control' %>
              </div>
              <div class="form-group mt-3">
                <%= f.input :photos, as: :file, input_html: {multiple: true} %>
              </div>
              <div class="form-group mt-4">
                <%= f.submit 'Actualizar Oferta', class: 'btn btn-warning text-light' %>
              </div>
            <% end %>
            <%= link_to 'Volver a la lista', offers_path, class: 'btn btn-secondary mt-3' %>
          </div>
        </div>
      <% end %>

      <!-- Botones y formularios para el voluntario -->
      <% if current_user.role == "voluntario" %>
        <div data-controller="toggle">
          <%= link_to 'Aplica aquí', "", class: 'btn btn-secondary', data: {action: "toggle#fire"} %>
          <div class="d-none mt-3" data-toggle-target="form">
            <h1>Agregar fechas de voluntariado</h1>
            <%= simple_form_for [@offer, @application], data: {turbo: false} do |f| %>
              <div class="form-group">
                <%= f.input :start_date, as: :string, input_html: {data: {controller: "datepicker"}} %>
              </div>
              <div class="form-group mt-3">
                <%= f.input :end_date, as: :string, input_html: {data: {controller: "datepicker"}} %>
              </div>
              <div class="form-group mt-4">
                <%= f.submit 'Aplicar', class: 'btn btn-primary' %>
              </div>
            <% end %>
            <%= link_to 'Volver a la lista', offers_path, class: 'btn btn-secondary mt-3' %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
